var pmc_contextual_player={player_main_div:".pmc-contextual-player",message_pattern:"pmcadm:dfp:isdirect=true",init:function(){this.bind_events()},bind_events:function(){var self=this;self.pause_triggered=false;jQuery(window).on("message",function(wrappedEvent){var event=wrappedEvent.originalEvent;if("string"===typeof event.data){if(event.data.substring(0,self.message_pattern.length)===self.message_pattern){if("object"!==typeof pmc_adm_config||"string"!==typeof pmc_adm_config.contextual_on_direct_sold||"show"!==pmc_adm_config.contextual_on_direct_sold){self.remove_contextual_player()}}else if(event.data==="pmc_show_interrupt_ads"){if(window.contextual_player){try{if(window.contextual_player.getState()!=="playing"){var jwconfig=window.contextual_player.getConfig();if(jwconfig.autostart==="viewable"&&jwconfig.viewable){self.pause_triggered=true}}else{self.pause_triggered=true}if(self.pause_triggered){window.contextual_player.pause()}}catch(e){}}}else if(event.data==="pmc_hide_interrupt_ads"){if(self.pause_triggered){window.contextual_player.play();self.pause_triggered=false}}}});if("object"===typeof contextual_player){contextual_player.on("play",self.current_playing);contextual_player.on("adPlay",self.current_playing);contextual_player.on("relatedReady",function(){var relatedPlugin=contextual_player.getPlugin("related");if("object"===typeof relatedPlugin){relatedPlugin.on("feedShown",function(){self.create_playlist_nav();jQuery(".pmc-contextual-player .jw-related-control").on("click",self.current_playing)})}});contextual_player.on("ready",function(){var relatedPlugin=contextual_player.getPlugin("related");if("object"===typeof relatedPlugin){relatedPlugin.on("feedShown",function(){self.create_playlist_nav();jQuery(".pmc-contextual-player .jw-related-control").on("click",self.current_playing)})}})}},remove_contextual_player:function(){var player=jQuery(this.player_main_div);if(0<player.length){player.remove()}},current_playing:function(){var playlist_index,current_item,all_item,now_playing;playlist_index=contextual_player.getPlaylistIndex();all_item=jQuery(".pmc-contextual-player .jw-related-shelf-item.is-active").removeClass("is-active");current_item=jQuery(".pmc-contextual-player .jw-related-shelf-item[data-jw-index="+playlist_index+"]");now_playing=jQuery('<div class="contextual-self-now-playing">VIEWING</div>');if("object"===typeof current_item&&1===current_item.length){current_item.addClass("is-active")}if(0===jQuery(".jw-related-shelf-item[data-jw-index="+playlist_index+"] .contextual-self-now-playing").length){current_item.find(".jw-related-shelf-item-image").append(now_playing)}},create_playlist_nav:function(){if(0===jQuery(".pmc-contextual-player .l-adm-contextual-video__shadow").length){var shadow_left=jQuery('<div class="l-adm-contextual-video__shadow l-adm-contextual-video__shadow-left"></div>'),shadow_right=jQuery('<div class="l-adm-contextual-video__shadow l-adm-contextual-video__shadow-right"></div>');jQuery(".pmc-contextual-player .jw-related-control-left").prepend(shadow_left);jQuery(".pmc-contextual-player .jw-related-control-right").prepend(shadow_right)}}};pmc_contextual_player.init();;
(()=>{"use strict";const t=window;t.blogherads=t.blogherads||{},t.blogherads.adq=t.blogherads.adq||[];const e=()=>t.blogherads,n=window,d=()=>"function"==typeof n.blogherads?.reloadAds,i=t=>Boolean(t?.domId?.length);function o(t,...e){console.debug.bind(null,t)(...e)}const s=window,a=s.document;class l{constructor(t){t.forEach((t=>this.push(t)))}push(t){try{t.call(null)}catch(t){}}attachConnatix(t){a.documentElement.classList.contains("floatingplayer-nofloat")?t.disableFloatingMode():s.addEventListener("message",(({data:e})=>{"pmcadm:floatingplayer=nofloat"===e&&t.disableFloatingMode()}),!1)}}const r=window;if(r.pmc=r.pmc||{},r.pmc.adm=r.pmc.adm||[],Array.isArray(r.pmc.adm)){const t=r.pmc.adm;r.pmc.adm=new l(t)}const c=()=>r.pmc,m=window,h=c();h.displayAds=new function(){const t=e();this.init=function(){this.bind_events(),this.handle_delay_loading()}.bind(this),this.bind_events=function(){const e=c();e.hooks?.add_action?.("pmc_gallery_rotate_ads",this.rotate_ads_for_gallery),e.hooks?.add_action?.("pmc_rotate_ads",this.rotate_ads),"loading"!==document.readyState?this.display():document.addEventListener("DOMContentLoaded",this.display),m.addEventListener("message",this.direct_sold_ad_event_listener,!1),t.addEventListener("blankAdServed",this.blank_ad_event_listener),t.addEventListener("slotRefresh",this.slot_refresh_event_listener)}.bind(this),this.rotate_ads=function(e){if(!e||this.is_direct_sold||!d())return;const n=[];jQuery("div.slot-rotate-"+e).each((function(){let e="";e=1===parseInt(jQuery(this).data("is-adhesion-ad"))?"skm-ad-bottom":jQuery(this).attr("id");const d=t.getSlotById(e);d&&n.push(d)})),n&&n.length&&t.reloadAds(n)}.bind(this),this.rotate_ads_for_gallery=function(){if(!d())return;const e=m.pmc_meta;"mobile"===e?.env?t.reloadAds(t.getSlots()):t.reloadAds()}.bind(this),this.handle_delay_loading=function(){if(!d())return;if(void 0===window?.pmc_adm_display_ads?.delay_loading)return;const e=window.pmc_adm_display_ads.delay_loading;Object.keys(e).forEach((n=>{const d=e[n],i=[];void 0!==d.time&&d.time>0&&i.push(new Promise((t=>{o(`Delay loading set time: ${d.time}`,n),setTimeout((()=>{t("time")}),1e3*d.time)}))),void 0!==d.scroll_depth&&d.scroll_depth>0&&i.push(new Promise((t=>{function e(){const s=window.innerHeight,a=d.scroll_depth*s;window.scrollY>a&&(o("Delay loading add scroll depth hit",n),"onscrollend"in window?window.removeEventListener("scrollend",e):window.removeEventListener("scroll",i),t("scroll_depth"))}const i=function(t){let e;return(...n)=>{clearTimeout(e),e=setTimeout((()=>{t.apply(this,n)}),100)}}(e);o(`Delay loading add scroll depth listener: ${d.time}`,n),"onscrollend"in window?window.addEventListener("scrollend",e):window.addEventListener("scroll",i)}))),i.length>0&&Promise.race(i).then((e=>{o(`Delay loading winner: ${e}`,n),t.getSlotById(n).removeBlock("pmc-adm-v2-delay-loading")}))}))}.bind(this),this.display=function(){""!==function(){const t=document.querySelector("#pmc-adm-ad-interrupts div.pmc-adm-boomerang-pub-div div");let e="";return t&&(e=t.id),e}()?m.pmc_admanager.show_interrupt_ads():t.getSlots().forEach((function(t){t.removeBlock("gallery"),t.display()}))}.bind(this),this.has_ads=function(e){return!!t.getSlots().find((t=>function(t,e){return Boolean(t&&"object"==typeof t&&"string"==typeof t.subAdUnitPath&&t.subAdUnitPath.includes(e))}(t,e)))}.bind(this),this.direct_sold_ad_event_listener=function(e){const n=c();if(!n.hooks||"string"!=typeof e.data)return;"pmcadm:dfp:isdirect=true"===e.data.substring(0,24)&&(this.is_direct_sold=!0,m.document.documentElement.classList.add("pmcadm-direct-sold"),t.getSlots().forEach((t=>t.setAutoRefreshTime(0))),n.hooks.do_action?.("pmc_adm_dfp_direct_sold",e))}.bind(this),this.blank_ad_event_listener=function(t){if(!i(t))return;let e=m.document.getElementById(t.domId);for(;e&&!e.matches(".adma");)e=e.parentElement;if(e&&e.matches(".adma")){for(e.classList.add("ad-empty");e&&!e.matches('[data-component="ad-unit"]');)e=e.parentElement;e&&e.setAttribute("data-ad-empty",!0)}}.bind(this),this.slot_refresh_event_listener=function(t){if(!i(t))return;let e=m.document.getElementById(t.domId);for(;e&&!e.matches(".adma");)e=e.parentElement;if(e&&e.matches(".ad-empty")){for(e.classList.remove("ad-empty");e&&!e.matches('[data-component="ad-unit"]');)e=e.parentElement;e&&e.matches("[data-ad-empty]")&&e.removeAttribute("data-ad-empty")}}.bind(this)},e().adq.push((function(){h.displayAds.init()}))})();;
(function(a){a.isScrollToFixed=function(b){return !!a(b).data("ScrollToFixed")};a.ScrollToFixed=function(d,i){var m=this;m.$el=a(d);m.el=d;m.$el.data("ScrollToFixed",m);var c=false;var H=m.$el;var I;var F;var k;var e;var z;var E=0;var r=0;var j=-1;var f=-1;var u=null;var A;var g;function v(){H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed");f=-1;E=H.offset().top;r=H.offset().left;if(m.options.offsets){r+=(H.offset().left-H.position().left)}if(j==-1){j=r}I=H.css("position");c=true;if(m.options.bottom!=-1){H.trigger("preFixed.ScrollToFixed");x();H.trigger("fixed.ScrollToFixed")}}function o(){var J=m.options.limit;if(!J){return 0}if(typeof(J)==="function"){return J.apply(H)}return J}function q(){return I==="fixed"}function y(){return I==="absolute"}function h(){return !(q()||y())}function x(){if(!q()){var J=H[0].getBoundingClientRect();u.css({display:H.css("display"),width:J.width,height:J.height,"float":H.css("float")});cssOptions={"z-index":m.options.zIndex,position:"fixed",top:m.options.bottom==-1?t():"",bottom:m.options.bottom==-1?"":m.options.bottom,"margin-left":"0px"};if(!m.options.dontSetWidth){cssOptions.width=H.css("width")}H.css(cssOptions);H.addClass(m.options.baseClassName);if(m.options.className){H.addClass(m.options.className)}I="fixed"}}function b(){var K=o();var J=r;if(m.options.removeOffsets){J="";K=K-E}cssOptions={position:"absolute",top:K,left:J,"margin-left":"0px",bottom:""};if(!m.options.dontSetWidth){cssOptions.width=H.css("width")}H.css(cssOptions);I="absolute"}function l(){if(!h()){f=-1;u.css("display","none");H.css({"z-index":z,width:"",position:F,left:"",top:e,"margin-left":""});H.removeClass("scroll-to-fixed-fixed");if(m.options.className){H.removeClass(m.options.className)}I=null}}function w(J){if(J!=f){H.css("left",r-J);f=J}}function t(){var J=m.options.marginTop;if(!J){return 0}if(typeof(J)==="function"){return J.apply(H)}return J}function B(){if(!a.isScrollToFixed(H)||H.is(":hidden")){return}var M=c;var L=h();if(!c){v()}else{if(h()){E=H.offset().top;r=H.offset().left}}var J=a(window).scrollLeft();var N=a(window).scrollTop();var K=o();if(m.options.minWidth&&a(window).width()<m.options.minWidth){if(!h()||!M){p();H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed")}}else{if(m.options.maxWidth&&a(window).width()>m.options.maxWidth){if(!h()||!M){p();H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed")}}else{if(m.options.bottom==-1){if(K>0&&N>=K-t()){if(!L&&(!y()||!M)){p();H.trigger("preAbsolute.ScrollToFixed");b();H.trigger("unfixed.ScrollToFixed")}}else{if(N>=E-t()){if(!q()||!M){p();H.trigger("preFixed.ScrollToFixed");x();f=-1;H.trigger("fixed.ScrollToFixed")}w(J)}else{if(!h()||!M){p();H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed")}}}}else{if(K>0){if(N+a(window).height()-H.outerHeight(true)>=K-(t()||-n())){if(q()){p();H.trigger("preUnfixed.ScrollToFixed");if(F==="absolute"){b()}else{l()}H.trigger("unfixed.ScrollToFixed")}}else{if(!q()){p();H.trigger("preFixed.ScrollToFixed");x()}w(J);H.trigger("fixed.ScrollToFixed")}}else{w(J)}}}}}function n(){if(!m.options.bottom){return 0}return m.options.bottom}function p(){var J=H.css("position");if(J=="absolute"){H.trigger("postAbsolute.ScrollToFixed")}else{if(J=="fixed"){H.trigger("postFixed.ScrollToFixed")}else{H.trigger("postUnfixed.ScrollToFixed")}}}var D=function(J){if(H.is(":visible")){c=false;B()}else{l()}};var G=function(J){(!!window.requestAnimationFrame)?requestAnimationFrame(B):B()};var C=function(){var K=document.body;if(document.createElement&&K&&K.appendChild&&K.removeChild){var M=document.createElement("div");if(!M.getBoundingClientRect){return null}M.innerHTML="x";M.style.cssText="position:fixed;top:100px;";K.appendChild(M);var N=K.style.height,O=K.scrollTop;K.style.height="3000px";K.scrollTop=500;var J=M.getBoundingClientRect().top;K.style.height=N;var L=(J===100);K.removeChild(M);K.scrollTop=O;return L}return null};var s=function(J){J=J||window.event;if(J.preventDefault){J.preventDefault()}J.returnValue=false};m.init=function(){m.options=a.extend({},a.ScrollToFixed.defaultOptions,i);z=H.css("z-index");m.$el.css("z-index",m.options.zIndex);u=a("<div />");I=H.css("position");F=H.css("position");k=H.css("float");e=H.css("top");if(h()){m.$el.after(u)}a(window).bind("resize.ScrollToFixed",D);a(window).bind("scroll.ScrollToFixed",G);if("ontouchmove" in window){a(window).bind("touchmove.ScrollToFixed",B)}if(m.options.preFixed){H.bind("preFixed.ScrollToFixed",m.options.preFixed)}if(m.options.postFixed){H.bind("postFixed.ScrollToFixed",m.options.postFixed)}if(m.options.preUnfixed){H.bind("preUnfixed.ScrollToFixed",m.options.preUnfixed)}if(m.options.postUnfixed){H.bind("postUnfixed.ScrollToFixed",m.options.postUnfixed)}if(m.options.preAbsolute){H.bind("preAbsolute.ScrollToFixed",m.options.preAbsolute)}if(m.options.postAbsolute){H.bind("postAbsolute.ScrollToFixed",m.options.postAbsolute)}if(m.options.fixed){H.bind("fixed.ScrollToFixed",m.options.fixed)}if(m.options.unfixed){H.bind("unfixed.ScrollToFixed",m.options.unfixed)}if(m.options.spacerClass){u.addClass(m.options.spacerClass)}H.bind("resize.ScrollToFixed",function(){u.height(H.height())});H.bind("scroll.ScrollToFixed",function(){H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed");B()});H.bind("detach.ScrollToFixed",function(J){s(J);H.trigger("preUnfixed.ScrollToFixed");l();H.trigger("unfixed.ScrollToFixed");a(window).unbind("resize.ScrollToFixed",D);a(window).unbind("scroll.ScrollToFixed",G);H.unbind(".ScrollToFixed");u.remove();m.$el.removeData("ScrollToFixed")});D()};m.init()};a.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1000,baseClassName:"scroll-to-fixed-fixed"};a.fn.scrollToFixed=function(b){return this.each(function(){(new a.ScrollToFixed(this,b))})}})(jQuery);;
